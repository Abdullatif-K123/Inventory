(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{2644:(e,a,t)=>{Promise.resolve().then(t.bind(t,5328))},5828:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{callServer:function(){return l.callServer},createServerReference:function(){return s},findSourceMapURL:function(){return n.findSourceMapURL}});let l=t(9603),n=t(3355),s=t(4979).createServerReference},1735:(e,a,t)=>{"use strict";t.d(a,{QRCodeImg:()=>s});var l=t(5155),n=t(2115);let s=()=>{let[e,a]=(0,n.useState)("");return(0,n.useEffect)(()=>{a(window.location.href)},[]),(0,l.jsx)("img",{className:"h-auto max-w-[100px] rounded-lg",src:"https://api.qrserver.com/v1/create-qr-code?size=500x500&data=".concat(e),alt:"QR Code"})}},5328:(e,a,t)=>{"use strict";t.d(a,{default:()=>d});var l=t(5155),n=t(2115),s=t(5828);let r=(0,s.createServerReference)("78a6e7a819dd2ecc46523dfd512ae2d4ac09c27501",s.callServer,void 0,s.findSourceMapURL,"editItem");var i=t(1735);let c={message:""};function d(e){let{item:a}=e,[t,s]=(0,n.useState)(null),[d,o]=(0,n.useState)(a.fileUrl),[m,u,f]=(0,n.useActionState)(r,c),x=a.last_maintenance_date?a.last_maintenance_date.toISOString().split("T")[0]:"",h=a.next_maintenance_date?a.next_maintenance_date.toISOString().split("T")[0]:"",p=r.bind(null,a.id,a.site_id,d),j=async e=>{if(e.preventDefault(),console.log("onSubmitCreateSite"),t){console.log("file exists");try{let e=new FormData;e.set("file",t);let a=await fetch("/api/upload",{method:"POST",body:e}),{success:l,path:n}=await a.json();if(console.log(l,n),o(n),console.log("....",d),!a.ok)throw Error(await a.text())}catch(e){console.error(e)}}};return(0,l.jsx)("form",{action:p,children:(0,l.jsxs)("div",{className:"flex flex-col mt-5",children:[(0,l.jsx)("div",{className:"flex gap-2 justify-between items-center",children:(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Item Information"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-5 m-10",children:[(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("label",{htmlFor:"item_name",className:"break-normal w-12",children:"Item Name"}),(0,l.jsx)("input",{name:"item_name",id:"item_name",className:"border rounded p-2 w-full",defaultValue:a.item_name})]}),(0,l.jsxs)("div",{className:"flex gap-10",children:[(0,l.jsx)("label",{htmlFor:"image",className:"w-12",children:"Image"}),(0,l.jsx)("input",{name:"file",type:"file",accept:"image/*",onChange:e=>{var a;return s((null===(a=e.target.files)||void 0===a?void 0:a[0])||null)}}),(0,l.jsx)("button",{type:"button",onClick:j,children:"Upload"})]}),(0,l.jsxs)("div",{className:"flex gap-10",children:[(0,l.jsx)("label",{htmlFor:"last_maintenance_date",className:"w-12 ",children:"Last maintenence Date"}),(0,l.jsx)("input",{type:"date",name:"last_maintenance_date",defaultValue:x})]}),(0,l.jsxs)("div",{className:"flex gap-10",children:[(0,l.jsx)("label",{htmlFor:"next_maintenance_date",className:"w-12",children:"Next maintenence Date"}),(0,l.jsx)("input",{type:"date",name:"next_maintenance_date",defaultValue:h})]}),(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("label",{htmlFor:"qr_code",className:"w-12",children:"QR Code"}),(0,l.jsx)(i.QRCodeImg,{})]}),(0,l.jsxs)("div",{className:"flex gap-5",children:[(0,l.jsx)("label",{htmlFor:"notes",className:"w-12",children:"Notes"}),(0,l.jsx)("textarea",{className:"border w-full",name:"notes",defaultValue:a.notes})]})]}),(0,l.jsx)("button",{type:"submit",className:"rounded p-2 bg-blue-200",children:"Save"})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,517,358],()=>a(2644)),_N_E=e.O()}]);