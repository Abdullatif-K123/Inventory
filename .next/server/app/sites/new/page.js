(()=>{var e={};e.id=364,e.ids=[364],e.modules={6330:e=>{"use strict";e.exports=require("@prisma/client")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9748:e=>{"use strict";e.exports=require("fs/promises")},3873:e=>{"use strict";e.exports=require("path")},9551:e=>{"use strict";e.exports=require("url")},1952:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var n=r(260),i=r(8203),a=r(5155),s=r.n(a),o=r(7292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["sites",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4699)),"C:\\Users\\USER\\Desktop\\inventory\\src\\app\\sites\\new\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1354)),"C:\\Users\\USER\\Desktop\\inventory\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\USER\\Desktop\\inventory\\src\\app\\sites\\new\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},f=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/sites/new/page",pathname:"/sites/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9393:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"40d49f487d3fe321265a1a994fdf88a0f8be87825d":()=>c,"6059edec6b7693ec8e3e43b457708d70509ca19082":()=>o,"605d69a76c9123a0f65f746b0853ccd4cf76177239":()=>l,"60fc39bb13bd31693a082ce8c1511055d44b4e3ab8":()=>f,"70f4ca2f1ac1fc81a6b5aa6d93a03ccff54fd9d32d":()=>d,"78a6e7a819dd2ecc46523dfd512ae2d4ac09c27501":()=>u});var n=r(1590);r(376);let i=new(r(6330)).PrismaClient;var a=r(7735),s=r(9184);async function o(e,t){if(console.log("create site"),!e)return;let r=t.get("site_name");console.log(r),console.log(await i.site.create({data:{site_name:r,fileUrl:e}})),(0,a.revalidatePath)("/"),(0,s.redirect)("/")}async function l(e,t){console.log("editSite");let r=t.get("site_name");console.log("new site name",r),await i.site.update({where:{id:e},data:{site_name:r}}),(0,a.revalidatePath)(`/sites/${e}`),(0,s.redirect)(`/sites/${e}`)}async function c(e){await i.site.delete({where:{id:e}}),(0,a.revalidatePath)("/"),(0,s.redirect)("/")}async function d(e,t,r){if(console.log("create item"),console.log(r),!t)return;let n=r.get("next_maintenance_date"),o=r.get("last_maintenance_date"),l={item_name:r.get("item_name"),notes:r.get("notes"),last_maintenance_date:o?new Date(o):null,next_maintenance_date:n?new Date(n):null,fileUrl:t,site:{connect:{id:e}}};console.log(await i.item.create({data:l})),(0,a.revalidatePath)(`/sites/${e}`),(0,s.redirect)(`/sites/${e}`)}async function u(e,t,r,n){if(console.log("editItem"),console.log(n),!r)return;let o=n.get("next_maintenance_date"),l=n.get("last_maintenance_date"),c={item_name:n.get("item_name"),notes:n.get("notes"),last_maintenance_date:l?new Date(l):null,next_maintenance_date:o?new Date(o):null,fileUrl:r,site:{connect:{id:t}}};await i.item.update({where:{id:e},data:c}),(0,a.revalidatePath)(`/sites/${t}`),(0,s.redirect)(`/sites/${t}`)}async function f(e,t){await i.item.delete({where:{id:t}}),(0,a.revalidatePath)(`/sites/${e}`),(0,s.redirect)(`/sites/${e}`)}(0,r(9344).D)([o,l,c,d,u,f]),(0,n.A)(o,"6059edec6b7693ec8e3e43b457708d70509ca19082",null),(0,n.A)(l,"605d69a76c9123a0f65f746b0853ccd4cf76177239",null),(0,n.A)(c,"40d49f487d3fe321265a1a994fdf88a0f8be87825d",null),(0,n.A)(d,"70f4ca2f1ac1fc81a6b5aa6d93a03ccff54fd9d32d",null),(0,n.A)(u,"78a6e7a819dd2ecc46523dfd512ae2d4ac09c27501",null),(0,n.A)(f,"60fc39bb13bd31693a082ce8c1511055d44b4e3ab8",null)},1203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"405b9f856b1ea80daeaf8e86bef3b4a6f23459fbce":()=>n.$$RSC_SERVER_ACTION_0});var n=r(4699)},4628:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9607,23))},7364:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,8531,23))},8361:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3219,23)),Promise.resolve().then(r.t.bind(r,4863,23)),Promise.resolve().then(r.t.bind(r,5155,23)),Promise.resolve().then(r.t.bind(r,802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,8530,23)),Promise.resolve().then(r.t.bind(r,8921,23))},4809:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6959,23)),Promise.resolve().then(r.t.bind(r,3875,23)),Promise.resolve().then(r.t.bind(r,1284,23)),Promise.resolve().then(r.t.bind(r,7174,23)),Promise.resolve().then(r.t.bind(r,4178,23)),Promise.resolve().then(r.t.bind(r,7190,23)),Promise.resolve().then(r.t.bind(r,1365,23))},6235:(e,t,r)=>{Promise.resolve().then(r.bind(r,6221))},5907:(e,t,r)=>{Promise.resolve().then(r.bind(r,73))},73:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(5512),i=r(8009),a=r(6248);let s=(0,a.createServerReference)("6059edec6b7693ec8e3e43b457708d70509ca19082",a.callServer,void 0,a.findSourceMapURL,"createSite"),o={message:""};function l(){let[e,t]=(0,i.useState)(null),[r,a]=(0,i.useState)(null),[l,c,d]=(0,i.useActionState)(s,o),u=async t=>{if(t.preventDefault(),console.log("onSubmitCreateSite"),e){console.log("file exists");try{let t=new FormData;t.set("file",e);let n=await fetch("/api/upload",{method:"POST",body:t}),{success:i,path:s}=await n.json();if(console.log(i,s),a(s),console.log("....",r),!n.ok)throw Error(await n.text())}catch(e){console.error(e)}}},f=s.bind(null,r);return(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsxs)("form",{action:f,children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Create site"}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-5 border border-gray-300 p-5 rounded-lg mb-4",children:[(0,n.jsxs)("div",{className:"flex flex-col w-1/2",children:[(0,n.jsx)("label",{htmlFor:"site_name",className:"block mb-2 text-sm font-medium text-gray-900",children:"Site Name"}),(0,n.jsx)("input",{type:"text",name:"site_name",id:"site_name",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",placeholder:"John",required:!0})]}),(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("p",{className:"font-semibold mb-3",children:"Attachment"}),(0,n.jsxs)("div",{className:"flex gap-x-4",children:[(0,n.jsx)("div",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-1/2 p-2.5",children:(0,n.jsx)("input",{name:"attachment",type:"file",accept:".pdf",onChange:e=>t(e.target.files?.[0]||null)})}),(0,n.jsx)("button",{className:"text-white bg-[#2557D6] hover:bg-[#2557D6]/90 focus:ring-4 focus:ring-[#2557D6]/50 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center",type:"button",onClick:u,children:"Upload"})]})]})]}),(0,n.jsx)("button",{type:"submit",className:"focus:outline-none text-white bg-green-700 hover:bg-green-800 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-[14px] px-5 py-2.5",children:"Save Settings"})]})})}},1358:(e,t,r)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=r(6760)},4175:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return o},decrypt:function(){return d},encrypt:function(){return c},getActionEncryptionKey:function(){return g},getClientReferenceManifestForRsc:function(){return m},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return f},stringToUint8Array:function(){return l}});let i=r(9212),a=r(2045),s=r(9294);function o(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function l(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function c(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function d(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}let u=Symbol.for("next.server.action-manifests");function f({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let s=null==(i=globalThis[u])?void 0:i.clientReferenceManifestsPerPage;globalThis[u]={clientReferenceManifestsPerPage:{...s,[(0,a.normalizeAppPath)(e)]:t},serverActionsManifest:r,serverModuleMap:n}}function p(){let e=globalThis[u];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");return e.serverModuleMap}function m(){let e=globalThis[u];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");let{clientReferenceManifestsPerPage:t}=e,r=s.workAsyncStorage.getStore();if(!r)return function(e){let t=Object.values(e),r={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of t)r.clientModules={...r.clientModules,...e.clientModules},r.edgeRscModuleMapping={...r.edgeRscModuleMapping,...e.edgeRscModuleMapping},r.rscModuleMapping={...r.rscModuleMapping,...e.rscModuleMapping};return r}(t);let n=t[r.route];if(!n)throw new i.InvariantError(`Missing Client Reference Manifest for ${r.route}.`);return n}async function g(){if(n)return n;let e=globalThis[u];if(!e)throw new i.InvariantError("Missing manifest for Server Actions.");let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw new i.InvariantError("Missing encryption key for Server Actions");return n=await crypto.subtle.importKey("raw",l(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}},8063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return p},encryptActionBoundArgs:function(){return f}}),r(7315);let n=r(6760),i=r(8534),a=r(7212),s=r(4175),o=r(3033),l=new TextEncoder,c=new TextDecoder;async function d(e,t){let r=await (0,s.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=atob(t),i=n.slice(0,16),a=n.slice(16),o=c.decode(await (0,s.decrypt)(r,(0,s.stringToUint8Array)(i),(0,s.stringToUint8Array)(a)));if(!o.startsWith(e))throw Error("Invalid Server Action payload: failed to decrypt.");return o.slice(e.length)}async function u(e,t){let r=await (0,s.getActionEncryptionKey)();if(void 0===r)throw Error("Missing encryption key for Server Action. This is a bug in Next.js");let n=new Uint8Array(16);o.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let i=(0,s.arrayBufferToString)(n.buffer),a=await (0,s.encrypt)(r,n,l.encode(e+t));return btoa(i+(0,s.arrayBufferToString)(a))}async function f(e,t){let{clientModules:r}=(0,s.getClientReferenceManifestForRsc)(),i=Error();Error.captureStackTrace(i,f);let l=!1,c=await (0,a.streamToString)((0,n.renderToReadableStream)(t,r,{onError(e){l||(l=!0,i.message=e instanceof Error?e.message:String(e))}}));if(l)throw i;let d=o.workUnitAsyncStorage.getStore();if(!d)return u(e,c);let p=(0,o.getPrerenderResumeDataCache)(d),m=(0,o.getRenderResumeDataCache)(d),g=e+c,b=(null==p?void 0:p.encryptedBoundArgs.get(g))??(null==m?void 0:m.encryptedBoundArgs.get(g));if(b)return b;let h="prerender"===d.type?d.cacheSignal:void 0;null==h||h.beginRead();let v=await u(e,c);return null==h||h.endRead(),null==p||p.encryptedBoundArgs.set(g,v),v}async function p(e,t){let{edgeRscModuleMapping:r,rscModuleMapping:n}=(0,s.getClientReferenceManifestForRsc)(),a=await d(e,await t);return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(l.encode(a)),e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:n,serverModuleMap:(0,s.getServerModuleMap)()}})}},1354:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>d});var n=r(2740),i=r(2376),a=r.n(i),s=r(8726),o=r.n(s);r(1135);var l=r(9607),c=r.n(l);let d={title:"Create Next App",description:"Generated by create next app"};function u({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsxs)("body",{className:`${a().variable} ${o().variable} antialiased h-screen bg-[#fafafa]`,children:[(0,n.jsx)("div",{className:"border-b-2 border-gray-200 bg-white",children:(0,n.jsx)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto py-4",children:(0,n.jsx)(c(),{href:"/",children:(0,n.jsx)("h1",{className:"text-2xl",children:"Inventory Logo"})})})}),(0,n.jsx)("div",{className:"max-w-screen-xl mx-auto",children:e})]})})}},4699:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$RSC_SERVER_ACTION_0:()=>d,default:()=>u});var n=r(2740),i=r(1358);r(8063);var a=r(5726),s=r(6221),o=r(9748),l=r(3873);let c=null,d=async function(e){let t=e.get("file");if(!t||!c)return;let r=await t.arrayBuffer(),n=Buffer.from(r),i=(0,l.join)(process.cwd(),"public","uploads",t.name);console.log("======",c=`/uploads/${t.name}`),await (0,o.writeFile)(i,n);let s=e.get("site_name");if(!s||"string"!=typeof s)throw Error("Invalid or missing site_name");return console.log(await a.db.site.create({data:{site_name:s,fileUrl:c}})),{success:!0,filePath:c}};function u(){return(0,i.A)(d,"405b9f856b1ea80daeaf8e86bef3b4a6f23459fbce",null),(0,n.jsx)(s.default,{})}},6221:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\USER\\\\Desktop\\\\inventory\\\\src\\\\components\\\\site-creation-form.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\USER\\Desktop\\inventory\\src\\components\\site-creation-form.tsx","default")},5726:(e,t,r)=>{"use strict";r.d(t,{db:()=>n});let n=new(r(6330)).PrismaClient},440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(8077);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},1135:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,759,77,410],()=>r(1952));module.exports=n})();